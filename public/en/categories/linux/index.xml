<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Linux on ScienceChronicle</title>
    <link>http://localhost:1313/en/categories/linux/</link>
    <description>Recent content in Linux on ScienceChronicle</description>
    <generator>Hugo</generator>
    <language>en</language>
    <lastBuildDate>Tue, 17 Sep 2024 03:58:40 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/en/categories/linux/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>User inactivity detection in Linux</title>
      <link>http://localhost:1313/en/article/user-inactivity-detection-in-linux/</link>
      <pubDate>Tue, 17 Sep 2024 03:58:40 +0000</pubDate>
      <guid>http://localhost:1313/en/article/user-inactivity-detection-in-linux/</guid>
      <description>&lt;p&gt;We want to detect user inactivity on Linux system in a bash service run by systemd. Why? When user is inactive, we can launch some CPU-heavy tasks without disrupting user&amp;rsquo;s interaction with the system.&lt;/p&gt;&#xA;&lt;p&gt;A user has 2 primary ways of interaction with Linux system: through textual terminal or UI desktop like Cinnamon, Xface, etc. The methods of user (in)activity detection are different for terminal and UI.&lt;/p&gt;&#xA;&lt;h2 id=&#34;ui-environment&#34;&gt;UI environment&lt;/h2&gt;&#xA;&lt;p&gt;We conduct our tests on Linux Mint 20.3 (Una) with MATE 1.26.0, Linux Kernel 5.15.0-121.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Installing Perl::LanguageServer fails because IO:AIO error: c compiler cannot create executables</title>
      <link>http://localhost:1313/en/article/perl-language-server-io-aio-c-compiler-cannot-create-executables/</link>
      <pubDate>Fri, 06 Sep 2024 11:52:37 +0000</pubDate>
      <guid>http://localhost:1313/en/article/perl-language-server-io-aio-c-compiler-cannot-create-executables/</guid>
      <description>&lt;h2 id=&#34;the-problem&#34;&gt;The problem&lt;/h2&gt;&#xA;&lt;p&gt;While attempting to install &lt;code&gt;Perl::LanguageServer&lt;/code&gt; on my &lt;strong&gt;Linux Mint 20.3 Una&lt;/strong&gt;, the following command:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cpan install Perl::LanguageServer&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;failed, reporting that the &lt;code&gt;IO::AIO&lt;/code&gt; dependency was unsatisfied.&lt;/p&gt;&#xA;&lt;p&gt;I tried installing the &lt;code&gt;IO::AIO&lt;/code&gt; module separately:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cpan install IO::AIO&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;However, this resulted in the following error:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Continue anyways?  [y] y&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;checking for gcc... x86_64-linux-gnu-gcc&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;checking whether the C compiler works... no&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;configure: error: in `/home/morpher/.cpan/build/IO-AIO-4.81-7&amp;#39;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;configure: error: C compiler cannot create executables&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;See `config.log` for more details&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Warning: No success on command[/usr/bin/perl Makefile.PL INSTALLDIRS=site]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  MLEHMANN/IO-AIO-4.81.tar.gz&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  /usr/bin/perl Makefile.PL INSTALLDIRS=site -- NOT OK&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Next, I checked whether the required modules, as referred to by the &lt;a href=&#34;https://github.com/richterger/Perl-LanguageServer&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Perl-LanguageServer repository&lt;/a&gt;&#xA;, were installed by running:&lt;/p&gt;</description>
    </item>
    <item>
      <title>A typical Perl project directory structure</title>
      <link>http://localhost:1313/en/article/typical-perl-project-directory-structure/</link>
      <pubDate>Sun, 01 Sep 2024 01:58:40 +0000</pubDate>
      <guid>http://localhost:1313/en/article/typical-perl-project-directory-structure/</guid>
      <description>&lt;p&gt;A typical Perl project directory structure is designed to separate the main script(s) from modules, configurations, and other resources like tests or documentation. Here’s an example of a standard Perl project directory structure:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;my_perl_project/&#xA;├── bin/&#xA;│   └── main.pl&#xA;├── lib/&#xA;│   ├── MyApp/&#xA;│   │   ├── Module1.pm&#xA;│   │   └── Module2.pm&#xA;├── t/&#xA;│   ├── 01_module1.t&#xA;│   └── 02_module2.t&#xA;├── script/&#xA;│   └── some_utility_script.pl&#xA;├── doc/&#xA;│   └── README.md&#xA;├── Makefile.PL&#xA;└── MANIFEST&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;breakdown-of-the-structure&#34;&gt;Breakdown of the Structure&lt;/h3&gt;&#xA;&lt;h4 id=&#34;1-bin&#34;&gt;1. &lt;strong&gt;&lt;code&gt;bin/&lt;/code&gt; Directory:&lt;/strong&gt;&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;Purpose:&lt;/strong&gt; This directory contains the main executable scripts of your application.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Example:&lt;/strong&gt; &lt;code&gt;main.pl&lt;/code&gt; is the main entry point for your application.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Content:&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;main.pl&lt;/code&gt;: The main script that uses the modules from the &lt;code&gt;lib/&lt;/code&gt; directory.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;2-lib&#34;&gt;2. &lt;strong&gt;&lt;code&gt;lib/&lt;/code&gt; Directory:&lt;/strong&gt;&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;Purpose:&lt;/strong&gt; This directory is where your Perl modules (libraries) reside.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Example:&lt;/strong&gt; The &lt;code&gt;MyApp/&lt;/code&gt; directory within &lt;code&gt;lib/&lt;/code&gt; contains the modules &lt;code&gt;Module1.pm&lt;/code&gt; and &lt;code&gt;Module2.pm&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Content:&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;MyApp/Module1.pm&lt;/code&gt;: A Perl module providing specific functionality.&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;MyApp/Module2.pm&lt;/code&gt;: Another Perl module.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;Typical Module Structure:&lt;/strong&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Using SQLITE database with Perl on OpenWRT</title>
      <link>http://localhost:1313/en/article/using-sqlite-with-perl-on-openwrt-no-dbd/</link>
      <pubDate>Wed, 21 Aug 2024 03:58:40 +0000</pubDate>
      <guid>http://localhost:1313/en/article/using-sqlite-with-perl-on-openwrt-no-dbd/</guid>
      <description>&lt;p&gt;This article discusses using an SQLite database with Perl on the OpenWRT &lt;code&gt;openwrt-23.05 branch (git-23.233.52805-dae2684)&lt;/code&gt;. We aim to use an SQLite database with Perl.&lt;/p&gt;&#xA;&lt;p&gt;First, we need to install the &lt;code&gt;DBI&lt;/code&gt; module and then find and install &lt;code&gt;DBD&lt;/code&gt; for SQLite. Let&amp;rsquo;s examine the directory of Perl modules available on OpenWRT: &lt;a href=&#34;https://openwrt.org/packages/index/languages---perl&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Perl Modules on OpenWRT&lt;/a&gt;&#xA;.&lt;/p&gt;&#xA;&lt;p&gt;One can see that the &lt;code&gt;DBI&lt;/code&gt; module is present: &lt;a href=&#34;https://openwrt.org/packages/pkgdata/perl-dbi&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;perl-dbi&lt;/a&gt;&#xA;. After installing it, let&amp;rsquo;s check which &lt;code&gt;DBD&lt;/code&gt; modules are included:&lt;/p&gt;</description>
    </item>
    <item>
      <title>Ensuring Safe File Operations in Linux: Handling Simultaneous Reads and Writes</title>
      <link>http://localhost:1313/en/article/ensuring-safe-file-operations-in-linux/</link>
      <pubDate>Sun, 18 Aug 2024 22:58:40 +0000</pubDate>
      <guid>http://localhost:1313/en/article/ensuring-safe-file-operations-in-linux/</guid>
      <description>&lt;h3 id=&#34;ensuring-safe-file-operations-in-linux-handling-simultaneous-reads-and-writes&#34;&gt;Ensuring Safe File Operations in Linux: Handling Simultaneous Reads and Writes&lt;/h3&gt;&#xA;&lt;p&gt;In Linux, managing file access between multiple processes can be tricky, especially when one script is writing to a file while another is reading from it. Without proper synchronization, you may encounter situations where a reader script accesses a partially written file, leading to incomplete or corrupt data reads. In this blog post, we&amp;rsquo;ll explore how to handle simultaneous file access safely using &lt;code&gt;flock&lt;/code&gt; and atomic operations like &lt;code&gt;mv&lt;/code&gt;. We&amp;rsquo;ll also discuss best practices to ensure that your scripts can read and write files without interference.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Understanding Cronjob Self-Deletion: Behavior and Implications When Restarting Cron Service on OpenWRT</title>
      <link>http://localhost:1313/en/article/openwrt-understanding-cronjob-self-deletion/</link>
      <pubDate>Sun, 18 Aug 2024 01:58:40 +0000</pubDate>
      <guid>http://localhost:1313/en/article/openwrt-understanding-cronjob-self-deletion/</guid>
      <description>&lt;h3 id=&#34;intro&#34;&gt;Intro&lt;/h3&gt;&#xA;&lt;p&gt;The article addresses the question: Will a cronjob complete its run if it removes itself from the crontab and restarts the cron service? We conducted tests on OpenWRT version 23.05.3 240325 to find out.&lt;/p&gt;&#xA;&lt;h3 id=&#34;test&#34;&gt;Test&lt;/h3&gt;&#xA;&lt;p&gt;To answer this question, we wrote a short Perl script, &lt;code&gt;b.pl&lt;/code&gt;:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;#!/usr/bin/perl&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Start\n&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;`sed -i /b.pl/d /etc/crontabs/root`&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Removed crontab entry\n&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;`service cron restart`&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Restarted cron service\n&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;sleep&lt;/span&gt;(&lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Slept 10 sec and now exiting\n&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We added the following crontab entry using &lt;code&gt;crontab -e&lt;/code&gt;:&lt;/p&gt;</description>
    </item>
    <item>
      <title>Round-robin load-balancing between two VPNs with iptables and policy-based routing</title>
      <link>http://localhost:1313/en/article/round-robin-load-balancing-between-two-vpns-with-iptables-and-pbr/</link>
      <pubDate>Sun, 09 Jun 2024 11:52:37 +0000</pubDate>
      <guid>http://localhost:1313/en/article/round-robin-load-balancing-between-two-vpns-with-iptables-and-pbr/</guid>
      <description>&lt;h2 id=&#34;experiment-1&#34;&gt;Experiment 1&lt;/h2&gt;&#xA;&lt;p&gt;We want to send http traffik generated by our computer through a VPN tunnel.&lt;/p&gt;&#xA;&lt;h3 id=&#34;vpn-tunnels&#34;&gt;VPN tunnels&lt;/h3&gt;&#xA;&lt;p&gt;Create two VPN tunnels:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;openvpn --config au.ovpn&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;openvpn --config at.ovpn&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Two new interfaces will be created: &lt;code&gt;tun0&lt;/code&gt; and &lt;code&gt;tun1&lt;/code&gt;.&lt;/p&gt;&#xA;&lt;p&gt;Two configs should prevent setting of default gateways:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pull-filter ignore redirect-gateway&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;routing&#34;&gt;Routing&lt;/h3&gt;&#xA;&lt;p&gt;Create a new routing table:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;echo&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;201 vpn1&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; /etc/iproute2/rt_tables&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;and add default routing to the table:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip route add default dev tun1 table vpn1&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Check:&lt;/p&gt;</description>
    </item>
    <item>
      <title>Network based message collector with socat</title>
      <link>http://localhost:1313/en/article/network-based-message-collector-with-socat/</link>
      <pubDate>Thu, 30 May 2024 11:52:37 +0000</pubDate>
      <guid>http://localhost:1313/en/article/network-based-message-collector-with-socat/</guid>
      <description>&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;&#xA;&lt;p&gt;The simplest message collector code can be implemented with &lt;code&gt;socat&lt;/code&gt;:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;socat -u TCP4-LISTEN:4444,reuseaddr,fork OPEN:/tmp/log.txt,creat,append&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It will listen on tcp port 4444, it can accept multiple simultaneous connections which guarantees no connection is refused and it will write the data recieved on the port to &lt;code&gt;/tmp/log.txt&lt;/code&gt;, appending to the file if it already exists or creating a new if it does not.&lt;/p&gt;&#xA;&lt;p&gt;The sender can be implemented in many ways, for example:&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
